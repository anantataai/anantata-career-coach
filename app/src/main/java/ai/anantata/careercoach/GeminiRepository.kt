package ai.anantata.careercoach

import ai.anantata.careercoach.BuildConfig
import com.google.ai.client.generativeai.GenerativeModel
import com.google.ai.client.generativeai.type.generationConfig
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.flow

class GeminiRepository {

    private val model = GenerativeModel(
        modelName = "gemini-2.0-flash-exp",
        apiKey = BuildConfig.GEMINI_API_KEY,
        generationConfig = generationConfig {
            temperature = 0.7f
            topK = 40
            topP = 0.95f
        }
    )

    fun sendMessage(message: String): Flow<String> = flow {
        val response = model.generateContentStream(message)
        response.collect { chunk ->
            emit(chunk.text ?: "")
        }
    }

    suspend fun generateAssessmentQuestions(
        type: String
    ): List<AssessmentQuestion> {
        return if (type == "–ü–æ–≤–Ω—É") {
            listOf(
                AssessmentQuestion(1, "–°–∫—ñ–ª—å–∫–∏ –≤–∞–º —Ä–æ–∫—ñ–≤?", "current_state", "select", listOf("–î–æ 25", "26-35", "36-45", "–ë—ñ–ª—å—à–µ 45")),
                AssessmentQuestion(2, "–Ø–∫–∞ —É –≤–∞—Å –æ—Å–≤—ñ—Ç–∞?", "current_state", "select", listOf("–í–∏—â–∞ (–ë–∞–∫–∞–ª–∞–≤—Ä/–ú–∞–≥—ñ—Å—Ç—Ä)", "–ù–µ–ø–æ–≤–Ω–∞ –≤–∏—â–∞ (—Å—Ç—É–¥–µ–Ω—Ç)", "–°–µ—Ä–µ–¥–Ω—è —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞", "–°–µ—Ä–µ–¥–Ω—è/–±–µ–∑ –æ—Å–≤—ñ—Ç–∏")),
                AssessmentQuestion(3, "–Ø–∫–∞ –≤–∞—à–∞ –ø–æ—Ç–æ—á–Ω–∞ –ø–æ—Å–∞–¥–∞?", "current_state", "select", listOf("–ù–µ –ø—Ä–∞—Ü—é—é/—Å—Ç—É–¥–µ–Ω—Ç/—Å—Ç–∞–∂–µ—Ä", "–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å/—Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç", "–ö–µ—Ä—ñ–≤–Ω–∏–∫/–º–µ–Ω–µ–¥–∂–µ—Ä", "–í–ª–∞—Å–Ω–∏–π –±—ñ–∑–Ω–µ—Å")),
                AssessmentQuestion(4, "–°–∫—ñ–ª—å–∫–∏ —Ä–æ–∫—ñ–≤ –¥–æ—Å–≤—ñ–¥—É —Ä–æ–±–æ—Ç–∏?", "current_state", "select", listOf("–ë–µ–∑ –¥–æ—Å–≤—ñ–¥—É/–¥–æ 1 —Ä–æ–∫—É", "1-5 —Ä–æ–∫—ñ–≤", "5-10 —Ä–æ–∫—ñ–≤", "–ë—ñ–ª—å—à–µ 10 —Ä–æ–∫—ñ–≤")),
                AssessmentQuestion(5, "–Ø–∫–∞ –≤–∞—à–∞ –ø–æ—Ç–æ—á–Ω–∞ –∑–∞—Ä–ø–ª–∞—Ç–∞? (–≥—Ä–Ω/–º—ñ—Å)", "current_state", "select", listOf("–ù–µ –ø—Ä–∞—Ü—é—é/–¥–æ 20,000", "20,000-50,000", "50,000-100,000", "–ë—ñ–ª—å—à–µ 100,000")),
                AssessmentQuestion(6, "–í–∞—à—ñ –∫–ª—é—á–æ–≤—ñ –Ω–∞–≤–∏—á–∫–∏? (–æ–±–µ—Ä—ñ—Ç—å –æ—Å–Ω–æ–≤–Ω–µ)", "current_state", "select", listOf("–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è —Ç–∞ —Ä–æ–±–æ—Ç–∞ –∑ –ª—é–¥—å–º–∏", "–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏", "–õ—ñ–¥–µ—Ä—Å—Ç–≤–æ —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è", "–ö—Ä–µ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ —Ç–≤–æ—Ä—á—ñ—Å—Ç—å")),
                AssessmentQuestion(7, "–í–∞—à—ñ –≥–æ–ª–æ–≤–Ω—ñ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è?", "current_state", "select", listOf("–©–µ –Ω–µ–º–∞—î –∑–Ω–∞—á–Ω–∏—Ö –¥–æ—Å—è–≥–Ω–µ–Ω—å", "–£—Å–ø—ñ—à–Ω–æ –≤–∏–∫–æ–Ω–∞–≤ —Å–∫–ª–∞–¥–Ω—ñ –ø—Ä–æ–µ–∫—Ç–∏", "–û—Ç—Ä–∏–º–∞–≤ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è/–≤–∏–∑–Ω–∞–Ω–Ω—è", "–ü–æ–±—É–¥—É–≤–∞–≤ –∫–æ–º–∞–Ω–¥—É/–ø–æ–∫—Ä–∞—â–∏–≤ –ø—Ä–æ—Ü–µ—Å–∏")),
                AssessmentQuestion(8, "–ù–∞ —è–∫—É –ø–æ—Å–∞–¥—É –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–µ—Ä–µ–π—Ç–∏?", "desired_state", "select", listOf("–°—Ç–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–æ–º/—Ñ–∞—Ö—ñ–≤—Ü–µ–º", "–°—Ç–∞—Ç–∏ –∫–µ—Ä—ñ–≤–Ω–∏–∫–æ–º/–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º", "–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –±—ñ–∑–Ω–µ—Å", "–ó–º—ñ–Ω–∏—Ç–∏ —Å—Ñ–µ—Ä—É –¥—ñ—è–ª—å–Ω–æ—Å—Ç—ñ")),
                AssessmentQuestion(9, "–Ø–∫—É –∑–∞—Ä–ø–ª–∞—Ç—É –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏? (–≥—Ä–Ω/–º—ñ—Å)", "desired_state", "select", listOf("25,000-50,000", "50,000-100,000", "100,000-150,000", "–ë—ñ–ª—å—à–µ 150,000")),
                AssessmentQuestion(10, "–í —è–∫–æ–º—É —Ç–∏–ø—ñ –∫–æ–º–ø–∞–Ω—ñ—ó —Ö–æ—á–µ—Ç–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏?", "desired_state", "select", listOf("–í–µ–ª–∏–∫–∞ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ü—ñ—è", "–°–µ—Ä–µ–¥–Ω—ñ–π/–º–∞–ª–∏–π –±—ñ–∑–Ω–µ—Å/—Å—Ç–∞—Ä—Ç–∞–ø", "–î–µ—Ä–∂–∞–≤–Ω–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è", "–í–ª–∞—Å–Ω–∏–π –±—ñ–∑–Ω–µ—Å/—Ñ—Ä—ñ–ª–∞–Ω—Å")),
                AssessmentQuestion(11, "–ó–∞ —è–∫–∏–π —Ç–µ—Ä–º—ñ–Ω —Ö–æ—á–µ—Ç–µ –¥–æ—Å—è–≥—Ç–∏ —Ü—ñ—î—ó –º–µ—Ç–∏?", "desired_state", "select", listOf("3-6 –º—ñ—Å—è—Ü—ñ–≤", "6-12 –º—ñ—Å—è—Ü—ñ–≤", "1-2 —Ä–æ–∫–∏", "–ë—ñ–ª—å—à–µ 2 —Ä–æ–∫—ñ–≤")),
                AssessmentQuestion(12, "–©–æ –¥–ª—è –≤–∞—Å –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–µ –≤ —Ä–æ–±–æ—Ç—ñ?", "desired_state", "select", listOf("–í–∏—Å–æ–∫–∞ –∑–∞—Ä–ø–ª–∞—Ç–∞", "–†–æ–∑–≤–∏—Ç–æ–∫ —Ç–∞ –Ω–∞–≤—á–∞–Ω–Ω—è", "Work-life balance", "–¶—ñ–∫–∞–≤—ñ –∑–∞–¥–∞—á—ñ —Ç–∞ –∫–æ–º–∞–Ω–¥–∞")),
                AssessmentQuestion(13, "–ß–∏ —î —É –≤–∞—Å —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏/–∫—É—Ä—Å–∏?", "additional", "select", listOf("–ù–µ–º–∞—î", "1-3 –∫—É—Ä—Å–∏ –ø—Ä–æ–π–¥–µ–Ω–æ", "–ë—ñ–ª—å—à–µ 3 –∫—É—Ä—Å—ñ–≤", "–ú—ñ–∂–Ω–∞—Ä–æ–¥–Ω—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏")),
                AssessmentQuestion(14, "–Ø–∫—ñ —É –≤–∞—Å —Ö–æ–±—ñ/—ñ–Ω—Ç–µ—Ä–µ—Å–∏?", "additional", "select", listOf("–°–ø–æ—Ä—Ç —Ç–∞ –∞–∫—Ç–∏–≤–Ω–∏–π –≤—ñ–¥–ø–æ—á–∏–Ω–æ–∫", "–ß–∏—Ç–∞–Ω–Ω—è —Ç–∞ —Å–∞–º–æ–æ—Å–≤—ñ—Ç–∞", "–¢–≤–æ—Ä—á—ñ—Å—Ç—å —Ç–∞ –º–∏—Å—Ç–µ—Ü—Ç–≤–æ", "–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó —Ç–∞ –±—ñ–∑–Ω–µ—Å")),
                AssessmentQuestion(15, "–©–æ –≤–∞—Å –Ω–∞–π–±—ñ–ª—å—à–µ –º–æ—Ç–∏–≤—É—î –≤ –∫–∞—Ä'—î—Ä—ñ?", "additional", "select", listOf("–§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å", "–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–µ –≤–∏–∑–Ω–∞–Ω–Ω—è", "–î–æ–ø–æ–º–æ–≥–∞ –ª—é–¥—è–º/—Å—É—Å–ø—ñ–ª—å—Å—Ç–≤—É", "–°–≤–æ–±–æ–¥–∞ —Ç–∞ –≥–Ω—É—á–∫—ñ—Å—Ç—å"))
            )
        } else {
            listOf(
                AssessmentQuestion(1, "–Ø–∫–∞ –≤–∞—à–∞ –ø–æ—Ç–æ—á–Ω–∞ –ø–æ—Å–∞–¥–∞?", "current_state", "select", listOf("–ù–µ –ø—Ä–∞—Ü—é—é/—Å—Ç—É–¥–µ–Ω—Ç", "–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å/—Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç", "–ö–µ—Ä—ñ–≤–Ω–∏–∫/–º–µ–Ω–µ–¥–∂–µ—Ä", "–í–ª–∞—Å–Ω–∏–π –±—ñ–∑–Ω–µ—Å")),
                AssessmentQuestion(2, "–°–∫—ñ–ª—å–∫–∏ —Ä–æ–∫—ñ–≤ –¥–æ—Å–≤—ñ–¥—É —Ä–æ–±–æ—Ç–∏?", "current_state", "select", listOf("–ë–µ–∑ –¥–æ—Å–≤—ñ–¥—É", "–î–æ 3 —Ä–æ–∫—ñ–≤", "3-10 —Ä–æ–∫—ñ–≤", "–ë—ñ–ª—å—à–µ 10 —Ä–æ–∫—ñ–≤")),
                AssessmentQuestion(3, "–Ø–∫–∞ –≤–∞—à–∞ –ø–æ—Ç–æ—á–Ω–∞ –∑–∞—Ä–ø–ª–∞—Ç–∞? (–≥—Ä–Ω/–º—ñ—Å)", "current_state", "select", listOf("–î–æ 20,000", "20,000-50,000", "50,000-100,000", "–ë—ñ–ª—å—à–µ 100,000")),
                AssessmentQuestion(4, "–ù–∞ —è–∫—É –ø–æ–∑–∏—Ü—ñ—é –≤–∏ –ø—Ä–∞–≥–Ω–µ—Ç–µ?", "desired_state", "select_or_custom", listOf("–°—Ç–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–æ–º", "–°—Ç–∞—Ç–∏ –∫–µ—Ä—ñ–≤–Ω–∏–∫–æ–º", "–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –±—ñ–∑–Ω–µ—Å", "–ó–±—ñ–ª—å—à–∏—Ç–∏ –¥–æ—Ö—ñ–¥", "üí° –Ü–Ω—à–µ (–≤–≤–µ–¥—ñ—Ç—å —Å–≤–æ—î)")),
                AssessmentQuestion(5, "–Ø–∫—É –∑–∞—Ä–ø–ª–∞—Ç—É –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏?", "desired_state", "select_or_custom", listOf("25,000-50,000 –≥—Ä–Ω/–º—ñ—Å", "50,000-100,000 –≥—Ä–Ω/–º—ñ—Å", "100,000-200,000 –≥—Ä–Ω/–º—ñ—Å", "–ë—ñ–ª—å—à–µ 200,000 –≥—Ä–Ω/–º—ñ—Å", "üí∞ –Ü–Ω—à–µ (–≤–≤–µ–¥—ñ—Ç—å —Å–≤–æ—î)"))
            )
        }
    }

    suspend fun analyzeCareerGap(
        answers: Map<Int, String>,
        questions: List<AssessmentQuestion>
    ): String {
        val answersText = buildString {
            questions.forEach { question ->
                val answer = answers[question.id] ?: "–ù–µ–º–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ"
                appendLine("${question.text}")
                appendLine("–í—ñ–¥–ø–æ–≤—ñ–¥—å: $answer")
                appendLine()
            }
        }

        val prompt = """
–¢–∏ - –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π career counselor. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–π –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ —Ç–∞ —Å—Ç–≤–æ—Ä–∏ –¥–µ—Ç–∞–ª—å–Ω–∏–π Gap Analysis.

–í–Ü–î–ü–û–í–Ü–î–Ü –ö–ê–ù–î–ò–î–ê–¢–ê:
$answersText

–ü–†–û–í–ï–î–ò –ê–ù–ê–õ–Ü–ó:

1. MATCH SCORE (0-100%) - –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ç–æ—á–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –±–∞–∂–∞–Ω—ñ–π –ø–æ–∑–∏—Ü—ñ—ó
2. –ü–û–¢–û–ß–ù–ò–ô vs –ë–ê–ñ–ê–ù–ò–ô –†–Ü–í–ï–ù–¨
3. –°–ò–õ–¨–ù–Ü –°–¢–û–†–û–ù–ò (3-4 –ø—É–Ω–∫—Ç–∏)
4. GAPS - —â–æ —Ç—Ä–µ–±–∞ —Ä–æ–∑–≤–∏–Ω—É—Ç–∏ (3-4 –ø—É–Ω–∫—Ç–∏)
5. –û–¶–Ü–ù–ö–ê –ó–ê–†–ü–õ–ê–¢–ò (–†–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∞/–¢—Ä–æ—Ö–∏ –∞–º–±—ñ—Ç–Ω–∞/–î—É–∂–µ –∞–º–±—ñ—Ç–Ω–∞)
6. –ß–ê–° –î–û –ú–ï–¢–ò

–§–û–†–ú–ê–¢ –í–Ü–î–ü–û–í–Ü–î–Ü (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π emoji):

üìä CAREER GAP ANALYSIS

üéØ Match Score: [—á–∏—Å–ª–æ]% - [–∫–æ–º–µ–Ω—Ç–∞—Ä]

üìç –ü–æ—Ç–æ—á–Ω–∏–π —Ä—ñ–≤–µ–Ω—å: [—Ä—ñ–≤–µ–Ω—å]
üéØ –ë–∞–∂–∞–Ω–∏–π —Ä—ñ–≤–µ–Ω—å: [—Ä—ñ–≤–µ–Ω—å]

üí™ –°–ò–õ–¨–ù–Ü –°–¢–û–†–û–ù–ò:
- [—Å—Ç–æ—Ä–æ–Ω–∞ 1]
- [—Å—Ç–æ—Ä–æ–Ω–∞ 2]
- [—Å—Ç–æ—Ä–æ–Ω–∞ 3]

üìà –©–û –ü–û–¢–†–Ü–ë–ù–û –†–û–ó–í–ò–ù–£–¢–ò:
- [gap 1]
- [gap 2]
- [gap 3]

üí∞ –û–¶–Ü–ù–ö–ê –ó–ê–†–ü–õ–ê–¢–ò: [–æ—Ü—ñ–Ω–∫–∞]
[–ø–æ—è—Å–Ω–µ–Ω–Ω—è]

‚è∞ –ß–ê–° –î–û –ú–ï–¢–ò: [—Ç–µ—Ä–º—ñ–Ω]
[–ø–æ—è—Å–Ω–µ–Ω–Ω—è]

–£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π —Ä–∏–Ω–æ–∫ –ø—Ä–∞—Ü—ñ. –ë—É–¥—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º —Ç–∞ –º–æ—Ç–∏–≤—É—é—á–∏–º.
""".trimIndent()

        return try {
            val response = model.generateContent(prompt)
            response.text ?: "–ù–µ –≤–¥–∞–ª–æ—Å—å –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å"
        } catch (e: Exception) {
            "–ü–æ–º–∏–ª–∫–∞ –∞–Ω–∞–ª—ñ–∑—É: ${e.message}"
        }
    }

    suspend fun generateActionPlan(
        answers: Map<Int, String>,
        questions: List<AssessmentQuestion>,
        gapAnalysis: String
    ): String {
        val answersText = buildString {
            questions.forEach { question ->
                val answer = answers[question.id] ?: "–ù–µ–º–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ"
                appendLine("${question.text}: $answer")
            }
        }

        val prompt = """
–¢–∏ - –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π career counselor. –ù–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–æ—Ñ—ñ–ª—é —Ç–∞ Gap Analysis —Å—Ç–≤–æ—Ä–∏ –ö–û–ù–ö–†–ï–¢–ù–ò–ô –ø–ª–∞–Ω –¥—ñ–π –∑ –†–Ü–í–ù–û 10 –ö–†–û–ö–Ü–í.

–ü–†–û–§–Ü–õ–¨:
$answersText

GAP ANALYSIS:
$gapAnalysis

–°–¢–í–û–†–ò –î–ï–¢–ê–õ–¨–ù–ò–ô ACTION PLAN –∑ –†–Ü–í–ù–û 10 –ö–†–û–ö–Ü–í:

–ö–æ–∂–µ–Ω –∫—Ä–æ–∫ –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏:
1. –ù–æ–º–µ—Ä (1-10)
2. –ù–∞–∑–≤–∞ –∫—Ä–æ–∫—É (–∫–æ—Ä–æ—Ç–∫–∞, 3-5 —Å–ª—ñ–≤)
3. –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –©–û –°–ê–ú–ï —Ä–æ–±–∏—Ç–∏ (2-3 —Ä–µ—á–µ–Ω–Ω—è –º–∞–∫—Å–∏–º—É–º)
4. –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (1 —Ç–∏–∂–¥–µ–Ω—å / 2 —Ç–∏–∂–Ω—ñ / 1 –º—ñ—Å—è—Ü—å / 2 –º—ñ—Å—è—Ü—ñ)
5. –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (–ö—Ä–∏—Ç–∏—á–Ω–æ / –í–∏—Å–æ–∫–∏–π / –°–µ—Ä–µ–¥–Ω—ñ–π)

–í–ê–ñ–õ–ò–í–û:
- –†–Ü–í–ù–û 10 –∫—Ä–æ–∫—ñ–≤ (–Ω–µ –±—ñ–ª—å—à–µ, –Ω–µ –º–µ–Ω—à–µ)
- –ö–æ–∂–µ–Ω –∫—Ä–æ–∫ –°–¢–ò–°–õ–ò–ô —ñ –ö–û–ù–ö–†–ï–¢–ù–ò–ô
- –ö—Ä–æ–∫–∏ –≤ –ª–æ–≥—ñ—á–Ω—ñ–π –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ
- –†–µ–∞–ª—ñ—Å—Ç–∏—á–Ω—ñ —Ç–µ—Ä–º—ñ–Ω–∏
- –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

–§–û–†–ú–ê–¢ –í–Ü–î–ü–û–í–Ü–î–Ü (–°–¢–†–û–ì–û):

üéØ ACTION PLAN

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìç –ö–†–û–ö 1: [–ù–∞–∑–≤–∞ –º–∞–∫—Å–∏–º—É–º 5 —Å–ª—ñ–≤]
‚è∞ –ß–∞—Å: [—Ç–µ—Ä–º—ñ–Ω]
üî• –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: [–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç]

[–û–ø–∏—Å - –º–∞–∫—Å–∏–º—É–º 2-3 —Ä–µ—á–µ–Ω–Ω—è]

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìç –ö–†–û–ö 2: [–ù–∞–∑–≤–∞]
‚è∞ –ß–∞—Å: [—Ç–µ—Ä–º—ñ–Ω]
üî• –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: [–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç]

[–û–ø–∏—Å]

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[... –ø—Ä–æ–¥–æ–≤–∂—É–π –¥–æ –∫—Ä–æ–∫—É 10]

üìç –ö–†–û–ö 10: [–ù–∞–∑–≤–∞]
‚è∞ –ß–∞—Å: [—Ç–µ—Ä–º—ñ–Ω]
üî• –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: [–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç]

[–û–ø–∏—Å]

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

–ë–ï–ó –î–û–î–ê–¢–ö–û–í–û–ì–û –¢–ï–ö–°–¢–£! –¢–Ü–õ–¨–ö–ò 10 –ö–†–û–ö–Ü–í!
""".trimIndent()

        return try {
            val actionPlanModel = GenerativeModel(
                modelName = "gemini-2.0-flash-exp",
                apiKey = BuildConfig.GEMINI_API_KEY,
                generationConfig = generationConfig {
                    temperature = 0.7f
                    topK = 40
                    topP = 0.95f
                    maxOutputTokens = 4096
                }
            )

            val response = actionPlanModel.generateContent(prompt)
            response.text ?: "–ù–µ –≤–¥–∞–ª–æ—Å—å –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø–ª–∞–Ω –¥—ñ–π"
        } catch (e: Exception) {
            "–ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–ª–∞–Ω—É: ${e.message}\n\n–°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑."
        }
    }
}

data class AssessmentQuestion(
    val id: Int,
    val text: String,
    val category: String,
    val inputType: String,
    val options: List<String>?
)